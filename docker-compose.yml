version: '3'
services:
  scrapper:
    build: .
    container_name: scrapper_container

  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:7.13.1
    container_name: es_elgranbazarcervecero
    restart: unless-stopped
    volumes:
        - "./es_data:/usr/share/elasticsearch/data:rw"
    ports:
        - '9200:9200'
        - '9300:9300'
    environment:
        - discovery.type=single-node
    #docker run -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" docker.elastic.co/elasticsearch/elasticsearch:7.13.1

  kib01:
    image: docker.elastic.co/kibana/kibana:7.13.1
    container_name: kibana_elgranbazarcervecero
    restart: unless-stopped
    ports:
      - 5601:5601
    environment:
      ELASTICSEARCH_URL: http://localhost:9200
      # ELASTICSEARCH_HOSTS: '["http://es01:9200","http://es02:9200","http://es03:9200"]'
    # networks:
      # - elastic

  apache:
    image: 'bitnami/apache:latest'
    restart: unless-stopped
    ports:
      - '7080:8080'
      - '7443:8443'
    volumes:
      - ./ui:/app

  nginx-reverse-proxy:
    container_name: nginx_reverse_proxy
    image: nginx:1.19
    restart: unless-stopped
    ports:
      - 8500:8500
    volumes:
      - ./nginx/conf.d:/etc/nginx/conf.d/
      